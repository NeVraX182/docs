<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<link rel="shortcut icon" type="image/png" href="themes/favicon-white.png">
<title>SonarQube Configuration Details</title>
<link rel="stylesheet" href="themes/css/html-zenika.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">

      <link rel="stylesheet" href="lib/c3.v0-6-11.min.css">
      <script src="lib/d3.v5-7-0.min.js" charset="utf-8"></script>
      <script src="lib/c3.v0-6-11.min.js"></script>
    
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>SonarQube Configuration Details</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#server-configuration">1. Server configuration</a>
<ul class="sectlevel2">
<li><a href="#quality-gates">1.1. Quality Gates</a></li>
<li><a href="#update">1.2. Update</a></li>
<li><a href="#rules-quality-profile">1.3. Rules / quality profile</a>
<ul class="sectlevel3">
<li><a href="#export">1.3.1. Export</a></li>
<li><a href="#import">1.3.2. Import</a></li>
<li><a href="#create">1.3.3. Create</a></li>
</ul>
</li>
<li><a href="#technical-debt">1.4. Technical Debt</a></li>
</ul>
</li>
<li><a href="#troubleshooting">2. Troubleshooting</a>
<ul class="sectlevel2">
<li><a href="#see-sonarqube-for-an-older-build">2.1. See SonarQube for an older build</a></li>
<li><a href="#make-sure-i-ve-got-all-the-relevant-new-rules-in-my-profile">2.2. Make sure I&#8217;ve got all the relevant new rules in my profile</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><span class="icon"><a class="image" href="index.html"><i class="fa fa-home"></i></a></span> ‏ ‏ ‎
<span class="icon"><a class="image" href="BP-sonarqube.adoc"><i class="fa fa-file-text-o"></i></a></span> ‏ ‏ ‎
<span class="icon"><a class="image" href="BP-sonarqube.pdf"><i class="fa fa-file-pdf-o"></i></a></span></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./images/dge-sonarqube.png" alt="dge sonarqube" width="100%">
</div>
</div>
<div class="paragraph">
<p>SonarQube helps you calculate and monitor in near real time your code quality for most development languages.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./images/turnoff-test-coverage.png" alt="turnoff test coverage" width="100%">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="server-configuration"><a class="anchor" href="#server-configuration"></a>1. Server configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="quality-gates"><a class="anchor" href="#quality-gates"></a>1.1. Quality Gates</h3>
<div class="paragraph">
<p>Click on <strong>Quality Gate</strong></p>
</div>
<div class="paragraph">
<p>Create a new one for your project and select your quality gate rules :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Comments is less than 30 then 25</p>
</li>
<li>
<p>Coverage is less than 86 then 80</p>
</li>
<li>
<p>Maintainability Raiting is worse than A then C</p>
</li>
<li>
<p>Reliability Raiting is worse than A then C</p>
</li>
<li>
<p>Security Raiting is worse than A then C</p>
</li>
<li>
<p>Unit Test Success (%) is worse than A then C</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="update"><a class="anchor" href="#update"></a>1.2. Update</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This has to be done only for a new Production Line</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Administration</strong> &#8594; <strong>System</strong> &#8594; <strong>Update Center</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>SonarJava : install or update to latest</p>
</li>
<li>
<p>Findbugs : install</p>
</li>
<li>
<p>SoftVis3D : install</p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./images/dilbert-legacy-code.jpg" alt="dilbert legacy code" width="100%">
</div>
</div>
</div>
<div class="sect2">
<h3 id="rules-quality-profile"><a class="anchor" href="#rules-quality-profile"></a>1.3. Rules / quality profile</h3>
<div class="sect3">
<h4 id="export"><a class="anchor" href="#export"></a>1.3.1. Export</h4>
<div class="ulist">
<ul>
<li>
<p>Navigate to <strong>Quality Profiles</strong> &#8594; <strong>BCT</strong> (or your profile) &#8594; <strong>Actions</strong> &#8594; <strong>Back Up</strong></p>
</li>
<li>
<p>This will download a XML</p>
</li>
<li>
<p>On CG-WM, the common java XML quality profile is saved here :</p>
<div class="literalblock">
<div class="content">
<pre>src\docs\SonarQube.qualityProfile.BCT.xml</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="import"><a class="anchor" href="#import"></a>1.3.2. Import</h4>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
for an import to be successful, SonarQube must know the rules, so SonarJava and Findbugs must be up to date
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Navigate to <strong>Quality Profiles</strong> &#8594; dropdown menu next to <strong>Create</strong> &#8594; <strong>Restore Profile</strong></p>
</li>
<li>
<p>Provide the saved XML</p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./images/dilbert-legacy-squirrels.jpg" alt="dilbert legacy squirrels" width="100%">
</div>
</div>
</div>
<div class="sect3">
<h4 id="create"><a class="anchor" href="#create"></a>1.3.3. Create</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This has to be done only if you want to define a custom set of rules</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Choose <strong>Quality Profiles</strong> &#8594; <strong>Java</strong> &#8594; <strong>Sonar way</strong> &#8594; <strong>Copy</strong></p>
</li>
<li>
<p>Select the newly created profile</p>
</li>
<li>
<p>Now you can :</p>
<div class="ulist">
<ul>
<li>
<p>Click on the number of active rules to deactivate some</p>
</li>
<li>
<p>Click on <strong>Activate More</strong></p>
</li>
<li>
<p>Go to <strong>Rules</strong>, search one and change its value</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./images/dilbert-technical-debt.jpg" alt="dilbert technical debt" width="100%">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="technical-debt"><a class="anchor" href="#technical-debt"></a>1.4. Technical Debt</h3>
<div class="ulist">
<ul>
<li>
<p>Select <strong>Administration</strong> &#8594; <strong>Configuration</strong> &#8594; <strong>General Settings</strong> &#8594; <strong>Technical Debt</strong></p>
</li>
<li>
<p>Set Maintainability rating grid = 0.01,0.02,0.03,0.05</p>
<div class="ulist">
<ul>
<li>
<p><em>This means that a tech debt &lt; 1% is rated A, a tech debt &gt; 5% is rated E.</em></p>
</li>
</ul>
</div>
</li>
<li>
<p>Hit <strong>save technical debt</strong></p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./images/geek-and-poke-parenting-geeks.jpg" alt="geek and poke parenting geeks" width="33%">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="troubleshooting"><a class="anchor" href="#troubleshooting"></a>2. Troubleshooting</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="see-sonarqube-for-an-older-build"><a class="anchor" href="#see-sonarqube-for-an-older-build"></a>2.1. See SonarQube for an older build</h3>
<div class="paragraph">
<p>SonarQube does not have history available for browsing, you can only see the last build. So you have to retrigger the gerrit patch to see specific data associated to your change.</p>
</div>
<div class="paragraph">
<p>You can do an empty <strong>commit amend</strong> from Eclipse. But you can also retrigger from Jenkins.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Go to Jenkins homepage</p>
</li>
<li>
<p>Navigate to the pipeline/job</p>
</li>
<li>
<p>If your build is still in the history</p>
<div class="ulist">
<ul>
<li>
<p>Open it</p>
</li>
<li>
<p>Select <strong>Retrigger</strong></p>
</li>
</ul>
</div>
</li>
<li>
<p>Else if your build has been deleted</p>
<div class="ulist">
<ul>
<li>
<p>Go to Jenkins homepage</p>
</li>
<li>
<p>Click on <strong>Query and Trigger Gerrit Patches</strong></p>
</li>
<li>
<p>In <strong>Query String</strong>, put your change-id</p>
</li>
<li>
<p>Click <strong>SEARCH</strong></p>
</li>
<li>
<p>Select the change</p>
</li>
<li>
<p>Click <strong>TRIGGER SELECTED</strong></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./images/monkeyuser-technical-debt.jpg" alt="monkeyuser technical debt" width="50%">
</div>
</div>
</div>
<div class="sect2">
<h3 id="make-sure-i-ve-got-all-the-relevant-new-rules-in-my-profile"><a class="anchor" href="#make-sure-i-ve-got-all-the-relevant-new-rules-in-my-profile"></a>2.2. Make sure I&#8217;ve got all the relevant new rules in my profile</h3>
<div class="paragraph">
<p>Each time a language plugin update is released, new rules are added, but they won&#8217;t appear automatically in your profile unless you&#8217;re using a built-in profile such as Sonar way.</p>
</div>
<div class="paragraph">
<p>If you&#8217;re not using a built-in profile, you can compare your profile to the built-in profile to see what new on-by-default rules you&#8217;re missing.</p>
</div>
<div class="paragraph">
<p>Another option is to go to the Rules space, and use the Available Since search facet to see what rules have been added to the platform since the day you upgraded the relevant plugin.</p>
</div>
<div class="paragraph">
<p>And finally, the profile interface itself will help you be aware of rules added in a new plugin version in the Latest New Rules section on the right of the interface.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="./images/monkeyuser-it-hell.jpg" alt="monkeyuser it hell" width="50%">
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-01-11 16:46:56 UTC
</div>
</div>
<link rel="stylesheet" href="lib/highlight/styles/gruvbox-dark.min.css">
<script src="lib/highlight/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>